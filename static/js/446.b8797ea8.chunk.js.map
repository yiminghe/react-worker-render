{"version":3,"file":"static/js/446.b8797ea8.chunk.js","mappings":"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","sources":["../../src/common/register.tsx","../../src/worker/noopRender.tsx","../../src/common/ComponentContext.tsx","../../src/common/componentPath.tsx","../../src/worker/nativeComponent.tsx","../../src/render/nativeComponents/Div.tsx","../../src/render/nativeComponent.tsx","../../src/render/nativeComponents/Input.tsx","../../src/common/utils.ts","../../src/render/getComponentClass.tsx","../../src/render/App.tsx","../../src/worker/nativeComponents/Input.tsx","../../src/worker/getComponentClass.tsx","../../src/worker/App.tsx","app/lifecycle.ts","title/lifecycle.ts","worker.ts","app/render.tsx","title/render.tsx","../../src/worker/index.tsx","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["import type { WorkerRenderComponentSpec } from './types';\n\nconst componentMaps: Record<string, WorkerRenderComponentSpec> = {};\n\nexport function registerComponent(\n  name: string,\n  desc: WorkerRenderComponentSpec,\n) {\n  componentMaps[name] = desc;\n}\n\nexport function getComponentDesc(name: string) {\n  return componentMaps[name];\n}\n","import Reconciler from 'react-reconciler';\n\nfunction noop() {\n  return;\n}\n\nconst HostConfig: any = {\n  supportsMutation: true,\n  appendInitialChild: noop,\n  createInstance: noop,\n  createTextInstance: noop,\n  finalizeInitialChildren: noop,\n  getRootHostContext: noop,\n  getChildHostContext: noop,\n  now: () => Date.now(),\n  getPublicInstance: noop,\n  prepareForCommit: noop,\n  prepareUpdate: noop,\n  resetAfterCommit: noop,\n  shouldSetTextContent: () => true,\n  appendChild: noop,\n  appendChildToContainer: noop,\n  commitTextUpdate: noop,\n  commitMount: noop,\n  commitUpdate: noop,\n  insertBefore: noop,\n  insertInContainerBefore: noop,\n  removeChild: noop,\n  removeChildFromContainer: noop,\n  resetTextContent: noop,\n  clearContainer: noop,\n};\n\nlet Render: any;\nlet id = 0;\n\nfunction getRender() {\n  if (!Render) {\n    Render = Reconciler(HostConfig);\n  }\n  return Render;\n}\n\nexport default {\n  create(element: React.ReactNode) {\n    const container = getRender().createContainer(++id, false, false);\n    const entry = {\n      update(newElement: React.ReactNode) {\n        getRender().updateContainer(newElement, container, null, null);\n      },\n      unmount() {\n        getRender().updateContainer(null, container, null);\n      },\n    };\n    entry.update(element);\n    return entry;\n  },\n  batchedUpdates(...args: any) {\n    return getRender().batchedUpdates(...args);\n  },\n};\n","import React from 'react';\nimport type {\n  AppComponent,\n  ComponentPathMeta,\n  WorkerRenderComponent,\n} from './types';\n\nexport type ComponentContextValue = {\n  parent: ComponentPathMeta;\n  app: AppComponent;\n};\n\nconst ComponentContext = React.createContext<ComponentContextValue>({\n  parent: null!,\n  app: null!,\n});\n\nexport default ComponentContext;\n","import ComponentContext, { ComponentContextValue } from './ComponentContext';\nimport React from 'react';\nimport { ComponentPathMeta } from './types';\n\nfunction getComponentContext(instance: ComponentPathMeta) {\n  if (!instance.componentContext) {\n    instance.componentContext = {\n      parent: instance,\n      app:\n        (instance.context as ComponentContextValue)?.app || (instance as any),\n    };\n  }\n  return instance.componentContext;\n}\n\nconst componentPath = {\n  classWithContext(ComponentClass: React.ComponentClass) {\n    ComponentClass.contextType = ComponentContext;\n  },\n\n  updateComponentPath(instance: ComponentPathMeta) {\n    const { parent } = instance.context as ComponentContextValue;\n    const { componentChildIndexMap } = parent;\n    if (componentChildIndexMap.has(instance)) {\n      instance.componentIndex = componentChildIndexMap.get(instance)!;\n    } else {\n      instance.componentIndex = ++parent.componentChildIndex;\n      componentChildIndexMap.set(instance, instance.componentIndex);\n      instance.componentPath = '';\n    }\n  },\n\n  getComponentPath(instance: ComponentPathMeta) {\n    if (!instance.componentPath) {\n      const { parent } = instance.context as ComponentContextValue;\n      instance.componentPath = `${componentPath.getComponentPath(parent)}-${\n        instance.componentIndex\n      }`;\n    }\n    return instance.componentPath;\n  },\n\n  renderWithComponentContext(\n    instance: ComponentPathMeta,\n    element: React.ReactNode,\n  ) {\n    instance.componentChildIndex = 0;\n    instance.componentChildIndexMap.clear();\n    return (\n      <ComponentContext.Provider value={getComponentContext(instance)}>\n        {element}\n      </ComponentContext.Provider>\n    );\n  },\n};\n\nexport default componentPath;\n","import React from 'react';\n\nexport const nativeComponents: Record<string, React.ComponentClass> = {};\n\nexport function getNativeComponentClass(name: string): React.ComponentClass {\n  if (nativeComponents[name]) {\n    return nativeComponents[name];\n  }\n\n  class CC extends React.Component<any> {\n    render() {\n      return this.props.children;\n    }\n  }\n\n  const C: any = CC;\n  C.displayName = name;\n  nativeComponents[name] = C;\n  return C;\n}\n\nexport function registerNativeComponent(\n  cls: string,\n  Cls: React.ComponentClass,\n) {\n  nativeComponents[cls] = Cls;\n}\n\nObject.assign(nativeComponents, {\n  Div: getNativeComponentClass('div'),\n  Link: getNativeComponentClass('link'),\n  A: getNativeComponentClass('a'),\n});\n","import React from 'react';\n\nexport class Div extends React.Component<any> {\n  onClick = () => {\n    this.props.onClick?.();\n  };\n  render() {\n    return (\n      <div {...this.props} onClick={this.onClick}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Div } from './nativeComponents/Div';\n\nexport function getNativeComponentClass(name: string): React.ComponentClass {\n  if (nativeComponents[name]) {\n    return nativeComponents[name];\n  }\n\n  class CC extends React.Component<any> {\n    render() {\n      const Tag = name;\n      return <Tag {...this.props}></Tag>;\n    }\n  }\n\n  const C: any = CC;\n  C.displayName = name;\n  nativeComponents[name] = C;\n  return C;\n}\n\nexport const nativeComponents: Record<string, React.ComponentClass> = {\n  Div,\n};\n\nObject.assign(nativeComponents, {\n  A: getNativeComponentClass('a'),\n  Link: getNativeComponentClass('link')\n});\n\nexport function registerNativeComponent(\n  cls: string,\n  Cls: React.ComponentClass,\n) {\n  nativeComponents[cls] = Cls;\n}\n","import { registerComponent } from '../../worker';\nimport React from 'react';\nimport { log } from '../../common/log';\n\ninterface InputProps {\n  value: string;\n  seq: number;\n  onChange: Function;\n}\n\ninterface InputState {\n  value: string;\n  seq: number;\n}\n\nclass Input extends React.Component<InputProps, InputState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      value: props.value,\n      seq: props.seq,\n    };\n  }\n  static defaultProps = {\n    seq: 1,\n  };\n  static getDerivedStateFromProps(\n    nextProps: InputProps,\n    prevState: InputState,\n  ) {\n    if (\n      nextProps.seq === prevState.seq &&\n      nextProps.value !== prevState.value\n    ) {\n      log('accept input', nextProps.seq, prevState.seq, nextProps.value);\n      return {\n        ...prevState,\n        value: nextProps.value,\n      };\n    }\n    log('skip input', nextProps.seq, prevState.seq);\n    return {};\n  }\n  onChange = (e: any) => {\n    const { value } = e.target;\n    const current = {\n      value,\n      seq: this.state.seq + 1,\n    };\n    this.setState(current);\n    this.props.onChange(current);\n  };\n  render() {\n    return <input value={this.state.value} onChange={this.onChange} />;\n  }\n}\n\nexport default registerComponent('input', {\n  render() {\n    return (\n      <Input\n        value={this.state.value}\n        seq={this.state.seq}\n        onChange={this.getEventHandle('onChange')}\n      />\n    );\n  },\n});\n","export function noop() {\n  return;\n}\n\nexport function cleanFuncJson(json: any) {\n  const ret: any = {};\n  for (const k of Object.keys(json)) {\n    const value = json[k];\n    if (typeof value !== 'function') {\n      ret[k] = value;\n      continue;\n    }\n    if (k.match(/^on[A-z]/)) {\n      ret[k] = value.handleName + '';\n    }\n  }\n  return ret;\n}\n","import React from 'react';\nimport { getComponentDesc } from '../common/register';\nimport { FromRenderMsg, WorkerRenderComponent } from '../common/types';\nimport { nativeComponents } from './nativeComponent';\nimport componentPath from '../common/componentPath';\nimport ComponentContext, {\n  ComponentContextValue,\n} from '../common/ComponentContext';\nimport Input from './nativeComponents/Input';\nimport { noop } from '../common/utils';\n\nconst componentClassCache: Record<string, React.ComponentClass> = {};\n\nexport function getComponentClass(name: string): React.ComponentClass {\n  if (componentClassCache[name]) {\n    return componentClassCache[name];\n  }\n\n  const componentSpec = getComponentDesc(name);\n\n  class Component\n    extends React.Component<any, { state: any; __self: Component }>\n    implements WorkerRenderComponent\n  {\n    componentIndex = 0;\n    componentPath = '';\n    componentChildIndex = 0;\n    componentChildIndexMap = new Map();\n    eventHandles: Record<string, () => void> = {};\n    componentSpec = componentSpec;\n    componentName = name;\n    static contextType = ComponentContext;\n    publicInstance: any = {};\n    id = '';\n    constructor(props: any) {\n      super(props);\n      this.state = {\n        __self: this,\n        state: {},\n      };\n      this.publicInstance = Object.create(componentSpec);\n      Object.defineProperty(this.publicInstance, 'props', {\n        get: this.getInstanceProps,\n      });\n      Object.defineProperty(this.publicInstance, 'state', {\n        get: this.getInstanceState,\n      });\n    }\n    static getDerivedStateFromProps(_: any, { __self }: any) {\n      const instance: Component = __self;\n      componentPath.updateComponentPath(instance);\n      let state;\n      const { app } = instance.context as ComponentContextValue;\n      if (!instance.id) {\n        const path = componentPath.getComponentPath(instance);\n        instance.id = app.newComponentsPathIdMap[path];\n        if (!instance.id) {\n          throw new Error(`Can not find id from path: ${path}`);\n        }\n        app.addComponent(instance);\n        state = app.newComponentsIdStateMap[instance.id] || {};\n        return { state };\n      }\n      return {};\n    }\n\n    setStateState(newState: any) {\n      this.setState(({ state }) => {\n        return {\n          state: {\n            ...state,\n            ...newState,\n          },\n        };\n      });\n    }\n\n    getInstanceProps = () => {\n      return this.props;\n    };\n    getInstanceState() {\n      return this.state.state;\n    }\n    getContext() {\n      return this.context as ComponentContextValue;\n    }\n\n    componentDidMount() {\n      componentSpec.componentDidMount?.call(this.publicInstance);\n    }\n\n    callMethod = noop;\n\n    componentDidUpdate(prevProps: any, prevState: any) {\n      const { publicInstance } = this;\n      componentSpec.componentDidUpdate?.call(\n        publicInstance,\n        prevProps,\n        prevState.state,\n      );\n    }\n\n    componentWillUnmount() {\n      componentSpec.componentWillUnmount?.call(this.publicInstance);\n      this.getContext().app.removeComponent(this);\n    }\n\n    getEventHandle = (name: string) => {\n      const { eventHandles } = this;\n      const { app } = this.context as ComponentContextValue;\n      if (eventHandles[name]) {\n        return eventHandles[name];\n      }\n      eventHandles[name] = (...args: any) => {\n        const msg: FromRenderMsg = {\n          componentId: this.id,\n          method: name,\n          args,\n        };\n        app.postMessage(msg);\n      };\n      (eventHandles as any).handleName = name;\n      return eventHandles[name];\n    };\n\n    render(): React.ReactNode {\n      const element = componentSpec.render.call({\n        nativeComponents,\n        props: this.props,\n        state: this.state.state,\n        getEventHandle: this.getEventHandle,\n        getComponent: getComponentClass,\n      });\n      return componentPath.renderWithComponentContext(this, element);\n    }\n  }\n\n  const C = Component as any;\n\n  C.displayName = name;\n  componentClassCache[name] = C;\n  return C;\n}\n\nObject.assign(nativeComponents, {\n  Input: (Input as any) || getComponentClass('input'),\n});\n","import componentPath from '../common/componentPath';\nimport React from 'react';\nimport {\n  AppComponent,\n  WorkerRenderComponent,\n  WorkerLike,\n  FromWorkerMsg,\n  FromRenderMsg,\n} from '../common/types';\nimport { getComponentClass } from './getComponentClass';\nimport ReactDOM from 'react-dom';\nimport { noop } from '../common/utils';\nimport { log } from '../common/log';\n\nclass App\n  extends React.Component<\n    { worker: WorkerLike; entry: string },\n    { inited: boolean }\n  >\n  implements AppComponent\n{\n  componentIndex = 0;\n  componentPath = '1';\n  componentChildIndex = 0;\n  componentChildIndexMap = new Map();\n  newComponentsPathIdMap = {};\n  componentNameDefaultPropsMap = {};\n  newComponentsIdStateMap = {};\n  pendingIdStateMap = {};\n  components: Map<string, WorkerRenderComponent> = new Map();\n  componentSpec = null!;\n\n  constructor(props: any) {\n    super(props);\n    this.props.worker.onmessage = this.onmessage;\n    this.state = {\n      inited: false,\n    };\n  }\n  onmessage = (e: any) => {\n    const msg: FromWorkerMsg = JSON.parse(e.data);\n    log('from worker', msg);\n    const {\n      newComponentsIdStateMap,\n      newComponentsPathIdMap,\n      pendingIdStateMap,\n      newComponentNameDefaultPropsMap,\n    } = msg;\n    const { components, componentNameDefaultPropsMap } = this;\n    Object.assign(\n      componentNameDefaultPropsMap,\n      newComponentNameDefaultPropsMap,\n    );\n    for (const name of Object.keys(newComponentNameDefaultPropsMap)) {\n      getComponentClass(name).defaultProps =\n        newComponentNameDefaultPropsMap[name];\n    }\n    this.newComponentsIdStateMap = newComponentsIdStateMap;\n    this.newComponentsPathIdMap = newComponentsPathIdMap;\n\n    ReactDOM.unstable_batchedUpdates(() => {\n      if (!this.state.inited) {\n        this.setState({\n          inited: true,\n        });\n      }\n      for (const id of Object.keys(pendingIdStateMap)) {\n        const state = pendingIdStateMap[id];\n        const component = components.get(id)!;\n        component.setStateState(state);\n      }\n    });\n  };\n  postMessage(msg: FromRenderMsg) {\n    log('send to worker', msg);\n    this.props.worker.postMessage(JSON.stringify(msg));\n  }\n\n  addComponent(component: WorkerRenderComponent) {\n    this.components.set(component.id, component);\n  }\n  removeComponent(component: WorkerRenderComponent) {\n    this.components.delete(component.id);\n  }\n\n  setStateState = noop;\n\n  render(): React.ReactNode {\n    if (this.state.inited) {\n      const Entry = getComponentClass(this.props.entry);\n      return componentPath.renderWithComponentContext(this, <Entry />);\n    } else {\n      return null;\n    }\n  }\n}\n\ncomponentPath.classWithContext(App);\n\nexport default App;\n","import { registerComponent } from '../../render';\n\nexport default registerComponent('input', {\n  getInitialState() {\n    return {\n      value: this.props.value,\n      seq: 1,\n    };\n  },\n  onChange(e: any) {\n    // do not need send to render\n    this.setState(e, false);\n    this.props.onChange?.(e.value);\n  },\n  componentDidUpdate(prevProps: any, prevState: any) {\n    if (Number.isNaN(this.props.value) && Number.isNaN(this.state.value)) {\n      return;\n    }\n    if (this.props.value !== this.state.value) {\n      this.setState({\n        ...this.state,\n        value: this.props.value,\n      });\n    }\n  },\n  render() {\n    return null;\n  },\n});\n","import React from 'react';\nimport { getComponentDesc } from '../common/register';\nimport { WorkerRenderComponent } from '../common/types';\nimport { nativeComponents } from './nativeComponent';\nimport componentPath from '../common/componentPath';\nimport ComponentContext, {\n  ComponentContextValue,\n} from '../common/ComponentContext';\nimport { WorkerComponent } from './types';\nimport NativeInput from './nativeComponents/Input';\nimport { noop } from '../common/utils';\n\nconst componentClassCache: Record<string, React.ComponentClass> = {};\n\nlet gid = 1;\n\nexport function getComponentClass(\n  name: string,\n  native = false,\n): React.ComponentClass {\n  if (componentClassCache[name]) {\n    return componentClassCache[name];\n  }\n\n  const componentSpec = getComponentDesc(name);\n\n  class Component\n    extends React.Component<any, { state: any; __self: Component }>\n    implements WorkerRenderComponent\n  {\n    id: string;\n    componentIndex = 0;\n    componentPath = '';\n    componentChildIndex = 0;\n    componentChildIndexMap = new Map();\n    eventHandles: Record<string, () => void>;\n    componentSpec = componentSpec;\n    publicInstance: WorkerComponent;\n    componentName = name;\n\n    static contextType = ComponentContext;\n\n    static defaultProps = componentSpec.defaultProps;\n\n    constructor(props: any) {\n      super(props);\n      this.id = '';\n      this.publicInstance = Object.create(componentSpec);\n      this.publicInstance.setState = this.setStateState;\n      Object.defineProperty(this.publicInstance, 'props', {\n        get: () => {\n          return this.props;\n        },\n      });\n      Object.defineProperty(this.publicInstance, 'state', {\n        get: () => {\n          return this.state.state;\n        },\n      });\n      this.eventHandles = {};\n      this.state = {\n        __self: this,\n        state: {},\n      };\n      if (componentSpec.getInitialState) {\n        const state = componentSpec.getInitialState.call(this.publicInstance);\n        if (state) {\n          (this.state as any).state = state;\n        }\n      }\n    }\n\n    callMethod(method: string, args: any[]): void {\n      const publicInstance: any = this.publicInstance;\n      publicInstance[method](...args);\n    }\n\n    setStateState = (newState: any, sendToRender = true) => {\n      if (!native) {\n        sendToRender = true;\n      }\n      this.setState(({ state }) => {\n        let ret: any = {};\n        if (typeof newState === 'function') {\n          ret = { state: newState(state) };\n        } else {\n          ret = {\n            state: newState,\n          };\n        }\n        if (sendToRender) {\n          this.getContext().app.setStateState(this, ret.state);\n        }\n        return ret;\n      });\n    };\n\n    static getDerivedStateFromProps(nextProps: any, { __self }: any) {\n      const instance: Component = __self;\n      componentPath.updateComponentPath(instance);\n      const { app } = instance.context as ComponentContextValue;\n      if (!instance.id) {\n        instance.id = ++gid + '';\n        app.addComponent(instance);\n      }\n      if (instance.componentSpec.getDerivedStateFromProps) {\n        const state = { ...instance.state.state };\n        const newState = instance.componentSpec.getDerivedStateFromProps(\n          nextProps,\n          state,\n        );\n        Object.assign(state, newState);\n        return { state };\n      }\n      return {};\n    }\n\n    getContext() {\n      return this.context as ComponentContextValue;\n    }\n\n    componentDidMount() {\n      componentSpec.componentDidMount?.call(this.publicInstance);\n    }\n\n    componentDidUpdate(prevProps: any, prevState: any) {\n      const { publicInstance } = this;\n      componentSpec.componentDidUpdate?.call(\n        publicInstance,\n        prevProps,\n        prevState.state,\n      );\n    }\n\n    componentWillUnmount() {\n      componentSpec.componentWillUnmount?.call(this.publicInstance);\n      this.getContext().app.removeComponent(this);\n    }\n\n    getInstanceProps = () => {\n      return this.props;\n    };\n    getInstanceState = () => {\n      return this.state.state;\n    };\n\n    getEventHandle = (name: string) => {\n      const { eventHandles } = this;\n      if (eventHandles[name]) {\n        return eventHandles[name];\n      }\n      const publicInstance = this.publicInstance as any;\n      const handle: any = (...args: any) => {\n        publicInstance[name](...args);\n      };\n      handle.handleName = name;\n      eventHandles[name] = handle;\n      return handle;\n    };\n\n    render(): React.ReactNode {\n      const element = componentSpec.render.call({\n        nativeComponents,\n        props: this.props,\n        state: this.state.state,\n        getEventHandle: this.getEventHandle,\n        getComponent: getComponentClass,\n      });\n      return componentPath.renderWithComponentContext(this, element);\n    }\n  }\n\n  const C = Component as any;\n\n  C.displayName = name;\n  componentClassCache[name] = C;\n  return C;\n}\n\nObject.assign(nativeComponents, {\n  Input: (NativeInput as any) || getComponentClass('input', true),\n});\n","import componentPath from '../common/componentPath';\nimport React from 'react';\nimport { getComponentDesc } from '../common/register';\nimport {\n  AppComponent,\n  WorkerRenderComponent,\n  WorkerLike,\n  FromWorkerMsg,\n  FromRenderMsg,\n} from '../common/types';\nimport { getComponentClass } from './getComponentClass';\nimport noopRender from './noopRender';\nimport { cleanFuncJson } from '../common/utils';\nimport { log } from '../common/log';\n\nclass App\n  extends React.Component<{ worker: WorkerLike; entry: string }>\n  implements AppComponent\n{\n  componentIndex = 0;\n  componentPath = '1';\n  componentChildIndex = 0;\n  componentChildIndexMap = new Map();\n  newComponentsPathIdMap: Record<string, string> = {};\n  newComponentsIdStateMap: Record<string, any> = {};\n  pendingIdStateMap: Record<string, any> = {};\n  newComponentIds: Set<string> = new Set();\n  components: Map<string, WorkerRenderComponent> = new Map();\n  scheduled = false;\n  componentNameDefaultPropsMap: Record<string, string> = {};\n\n  constructor(props: any) {\n    super(props);\n    this.props.worker.onmessage = this.onmessage;\n  }\n  onmessage = (e: any) => {\n    const msg: FromRenderMsg = JSON.parse(e.data);\n    log('from render', msg);\n    const { componentId, method, args } = msg;\n    const component = this.components.get(componentId)!;\n    noopRender.batchedUpdates(() => {\n      component.callMethod(method, args);\n    });\n  };\n  postMessage(msg: FromWorkerMsg) {\n    log('send to render', msg);\n    this.props.worker.postMessage(JSON.stringify(msg));\n  }\n\n  afterSendToRender() {\n    this.pendingIdStateMap = {};\n    this.newComponentIds.clear();\n    this.newComponentsPathIdMap = {};\n    this.newComponentsIdStateMap = {};\n  }\n\n  scheduleSendToRender() {\n    if (this.scheduled) {\n      return;\n    }\n    this.scheduled = true;\n    Promise.resolve().then(() => {\n      this.sendToRender();\n      this.afterSendToRender();\n      this.scheduled = false;\n    });\n  }\n\n  componentDidMount() {\n    this.scheduleSendToRender();\n  }\n\n  sendToRender() {\n    const {\n      components,\n      pendingIdStateMap,\n      newComponentsIdStateMap,\n      newComponentsPathIdMap,\n      componentNameDefaultPropsMap,\n    } = this;\n\n    const newComponentNameDefaultPropsMap: Record<string, string> = {};\n\n    for (const id of Object.keys(pendingIdStateMap)) {\n      if (!components.has(id)) {\n        delete pendingIdStateMap[id];\n      }\n    }\n\n    for (const id of Array.from(this.newComponentIds)) {\n      const component = components.get(id)!;\n      const { componentName } = component;\n\n      newComponentsIdStateMap[id] = component.getInstanceState();\n      newComponentsPathIdMap[componentPath.getComponentPath(component)] = id;\n\n      if (!componentNameDefaultPropsMap[componentName]) {\n        componentNameDefaultPropsMap[componentName] =\n          getComponentDesc(componentName).defaultProps || {};\n        newComponentNameDefaultPropsMap[componentName] =\n          componentNameDefaultPropsMap[componentName];\n      }\n    }\n\n    this.postMessage({\n      newComponentsIdStateMap: cleanFuncJson(newComponentsIdStateMap),\n      newComponentsPathIdMap,\n      pendingIdStateMap: cleanFuncJson(pendingIdStateMap),\n      newComponentNameDefaultPropsMap: cleanFuncJson(\n        newComponentNameDefaultPropsMap,\n      ),\n    });\n  }\n  setStateState(component: WorkerRenderComponent, state: any) {\n    if (this.newComponentIds.has(component.id)) {\n      return;\n    }\n    const { pendingIdStateMap } = this;\n    const current = pendingIdStateMap[component.id] || {};\n    Object.assign(current, state);\n    pendingIdStateMap[component.id] = current;\n    this.scheduleSendToRender();\n  }\n  addComponent(component: WorkerRenderComponent) {\n    if (!this.components.has(component.id)) {\n      this.newComponentIds.add(component.id);\n    }\n    this.components.set(component.id, component);\n  }\n  removeComponent(component: WorkerRenderComponent) {\n    this.newComponentIds.delete(component.id);\n    this.components.delete(component.id);\n  }\n\n  render(): React.ReactNode {\n    const Entry = getComponentClass(this.props.entry);\n    return componentPath.renderWithComponentContext(this, <Entry />);\n  }\n}\n\ncomponentPath.classWithContext(App);\n\nexport default App;\n","export default {\n  getInitialState() {\n    return {\n      count: 1,\n    };\n  },\n  onChange(value: string) {\n    const n = parseInt(value);\n    if (typeof n === 'number' && !isNaN(n)) {\n      this.setState({\n        count: n,\n      });\n    }\n  },\n  onClick() {\n    this.setState({\n      count: this.state.count + 1,\n    });\n  },\n} as any;\n","export default {\n  defaultProps: {\n    defaultId: 1\n  },\n  getInitialState() {\n    return {\n      now: this.props.defaultId,\n    };\n  },\n  refresh() {\n    this.setState({\n      now: Date.now(),\n    });\n  },\n} as any;\n","import { ReactWorker } from '../../src/index';\nimport lifecycle from './app/lifecycle';\nimport render from './app/render';\nimport titleLifecycle from './title/lifecycle';\nimport titleRender from './title/render';\n\nconst entry = 'app';\n\nReactWorker.registerComponent(entry, {\n  ...lifecycle,\n  render,\n});\n\nReactWorker.registerComponent('title', {\n  ...titleLifecycle,\n  render: titleRender,\n});\n\nReactWorker.bootstrap({\n  worker: self,\n  entry,\n});\n","export default function render(this: any) {\n  const { Div, Input, Link, A } = this.nativeComponents;\n  const Title = this.getComponent('title');\n  return (\n    <>\n      <Title />\n      <Div>\n        set(number):{' '}\n        <Input\n          onChange={this.getEventHandle('onChange')}\n          value={this.state.count}\n        />\n      </Div>\n      <Div\n        style={{\n          border: '1px solid red',\n          margin: 10,\n          padding: 10,\n          userSelect: 'none',\n        }}\n        onClick={this.getEventHandle('onClick')}\n      >\n        click to increment: {this.state.count}\n      </Div>\n      <Link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css\" />\n      <Div><A className=\"github-fork-ribbon\" href=\"https://github.com/yiminghe/react-worker-render\"\n        data-ribbon=\"Fork me on GitHub\" title=\"Fork me on GitHub\">Fork me on GitHub</A></Div>\n    </>\n  );\n}\n","export default function render(this: any) {\n  const { Div } = this.nativeComponents;\n  return (\n    <Div\n      style={{\n        border: '1px solid red',\n        padding: 10,\n        margin: 10,\n        userSelect: 'none',\n      }}\n      onClick={this.getEventHandle('refresh')}\n    >\n      react-worker-render@{this.state.now}\n    </Div>\n  );\n}\n","import { registerComponent } from '../common/register';\nimport noopRender from './noopRender';\nimport React from 'react';\nimport App from './App';\nimport { WorkerLike } from '../common/types';\n\nexport { registerComponent };\n\nexport function bootstrap({\n  worker,\n  entry,\n}: {\n  worker: WorkerLike;\n  entry: string;\n}) {\n  noopRender.create(<App worker={worker} entry={entry} />);\n}\n\nexport { registerNativeComponent } from './nativeComponent';\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [500], function() { return __webpack_require__(446); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"3ec42e5b\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/react-worker-render/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t446: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkexample\"] = self[\"webpackChunkexample\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn __webpack_require__.e(500).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["componentMaps","registerComponent","name","desc","getComponentDesc","noop","Render","HostConfig","supportsMutation","appendInitialChild","createInstance","createTextInstance","finalizeInitialChildren","getRootHostContext","getChildHostContext","now","Date","getPublicInstance","prepareForCommit","prepareUpdate","resetAfterCommit","shouldSetTextContent","appendChild","appendChildToContainer","commitTextUpdate","commitMount","commitUpdate","insertBefore","insertInContainerBefore","removeChild","removeChildFromContainer","resetTextContent","clearContainer","id","getRender","Reconciler","element","container","createContainer","entry","update","newElement","updateContainer","unmount","batchedUpdates","React","parent","app","getComponentContext","instance","componentContext","context","componentPath","classWithContext","ComponentClass","contextType","ComponentContext","updateComponentPath","componentChildIndexMap","has","componentIndex","get","componentChildIndex","set","getComponentPath","renderWithComponentContext","clear","value","nativeComponents","getNativeComponentClass","CC","this","props","children","C","displayName","Object","assign","Div","Link","A","onClick","Tag","Input","onChange","e","current","target","seq","state","setState","nextProps","prevState","defaultProps","render","getEventHandle","cleanFuncJson","json","ret","keys","k","match","handleName","componentClassCache","getComponentClass","componentSpec","Component","Map","eventHandles","componentName","publicInstance","getInstanceProps","callMethod","args","msg","componentId","method","postMessage","__self","create","defineProperty","getInstanceState","newState","componentDidMount","call","prevProps","componentDidUpdate","componentWillUnmount","getContext","removeComponent","getComponent","_","path","newComponentsPathIdMap","Error","addComponent","newComponentsIdStateMap","App","componentNameDefaultPropsMap","pendingIdStateMap","components","onmessage","JSON","parse","data","newComponentNameDefaultPropsMap","ReactDOM","inited","setStateState","worker","stringify","component","delete","Entry","getInitialState","Number","isNaN","gid","native","sendToRender","handle","getDerivedStateFromProps","NativeInput","newComponentIds","Set","scheduled","noopRender","Promise","resolve","then","afterSendToRender","scheduleSendToRender","Array","from","add","count","n","parseInt","defaultId","refresh","ReactWorker","lifecycle","Title","style","border","margin","padding","userSelect","rel","href","className","title","titleLifecycle","self","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","deferred","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","every","key","splice","r","getter","__esModule","d","a","definition","o","enumerable","f","chunkId","all","reduce","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","p","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","push","bind","moreModules","runtime","pop","next"],"sourceRoot":""}